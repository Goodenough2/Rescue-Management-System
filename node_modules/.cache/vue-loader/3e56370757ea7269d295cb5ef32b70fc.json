{"remainingRequest":"C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\src\\views\\log-manage\\store-record.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\src\\views\\log-manage\\store-record.vue","mtime":1606144922529},{"path":"C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Neal Wang\\IdeaProjects\\rescue_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhZGFwdGl2ZSBmcm9tICdAL2RpcmVjdGl2ZS9lbC10YWJsZScKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nCmltcG9ydCAqIGFzIFVzZXIgZnJvbSAnQC9hcGkvc3lzdGVtLW1hbmFnZS91c2VyJwppbXBvcnQgKiBhcyBnb29kc0NhdGVnb3J5IGZyb20gJ0AvYXBpL2dvb2RzLW1hbmFnZS9nb29kcy1jYXRlZ29yeScKaW1wb3J0ICogYXMgc3RvcmVSZWNvcmQgZnJvbSAnQC9hcGkvbG9nLW1hbmFnZS9zdG9yZS1yZWNvcmQnCmltcG9ydCAqIGFzIHN0b3JlT3BlcmF0ZVR5cGUgZnJvbSAnQC9hcGkvbG9nLW1hbmFnZS9zdG9yZS1vcGVyYXRlLXR5cGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N0b3JlUmVjb3JkJywKICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gfSwKICBkaXJlY3RpdmVzOiB7IGFkYXB0aXZlIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY2VzczogdGhpcy4kc3RvcmUuZ2V0dGVycy5hY2Nlc3NbJ1N5c3RlbUxvZyddWydTdG9yZVJlY29yZCddLAogICAgICBkYXRhczogbnVsbCwKICAgICAgb3BlcmF0b3JzOiBudWxsLAogICAgICBnb29kc0NhdGVnb3JpZXM6IG51bGwsCiAgICAgIHN0b3JlT3BlcmF0ZVR5cGVzOiBudWxsLAogICAgICBxdWVyeTogeyBvcGVyYXRlVHlwZUlkOiBudWxsLCBpb1R5cGU6IG51bGwsIGdvb2RzQ2F0ZWdvcnlJZDogbnVsbCwgbG9jYXRpb25UeXBlOiBudWxsLCBvcGVyYXRvcklkOiBudWxsIH0sCiAgICAgIHBhZ2U6IHsgdG90YWw6IDAsIGN1cnJlbnQ6IDEsIHNpemU6IDIwIH0sCiAgICAgIHNvcnQ6IHsgcHJvcDogJ3NvcnQnLCBvcmRlcjogJ2FzY2VuZGluZycgfSwKICAgICAgZGV0YWlsOiB7CiAgICAgICAgZGlhbG9nOiB7IHRpdGxlOiAn5LuT5YKo6K6w5b2V5L+h5oGvJywgdmlzaWJsZTogZmFsc2UsIGxhYmVsV2lkdGg6ICcxMjBweCcgfSwKICAgICAgICBtb2RlbHM6IHsgZG9jdW1lbnRDb2RlOiBudWxsLCBzdG9yZU9wZXJhdGVUeXBlOiB7IG5hbWU6IG51bGwgfSwgaW9UeXBlOiBudWxsLCBnb29kc0NhdGVnb3J5OiB7IG5hbWU6IG51bGwgfSwgZ29vZHNCYXJDb2RlOiBudWxsLCBnb29kc1JmaWRDb2RlOiBudWxsLCBsb2NhdGlvblR5cGU6IG51bGwsIGxvY2F0aW9uQmFyQ29kZTogbnVsbCwgbG9jYXRpb25SZmlkQ29kZTogbnVsbCwgcXVhbGl0eTogbnVsbCwgb3BlcmF0b3I6IHsgdXNlck5hbWU6IG51bGwgfSwgb3BlcmF0ZVRpbWU6IG51bGwsIGRlbGl2ZXJ5bWFuOiBudWxsLCBkZXNjcmlwdGlvbjogbnVsbCB9CiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IHsgbGlzdDogdHJ1ZSwgZXhwb3J0OiBmYWxzZSwgZGV0YWlsOiBmYWxzZSwgdXBkYXRlOiBmYWxzZSB9LAogICAgICBzb3J0T3JkZXJzOiBbJ2FzY2VuZGluZycsICdkZXNjZW5kaW5nJ10KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGFzKCkKICAgIHRoaXMuZ2V0T3BlcmF0b3JzKCkKICAgIHRoaXMuZ2V0R29vZHNDYXRlZ29yaWVzKCkKICAgIHRoaXMuZ2V0U3RvcmVPcGVyYXRlVHlwZXMoKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YXMoKSB7CiAgICAgIHRoaXMubG9hZGluZy5saXN0ID0gdHJ1ZQogICAgICBzdG9yZVJlY29yZC5nZXRMaXN0KHRoaXMucXVlcnksIHRoaXMucGFnZSwgdGhpcy5zb3J0KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRhdGFzID0gcmVzcG9uc2UuZGF0YS5pdGVtcwogICAgICAgIHRoaXMucGFnZS50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWwKICAgICAgICB0aGlzLmxvYWRpbmcubGlzdCA9IGZhbHNlCiAgICAgIH0pLmNhdGNoKHJlamVjdCA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nLmxpc3QgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIGdldE9wZXJhdG9ycygpIHsKICAgICAgVXNlci5nZXRsaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5vcGVyYXRvcnMgPSByZXNwb25zZS5kYXRhCiAgICAgIH0pLmNhdGNoKHJlamVjdCA9PiB7CiAgICAgIH0pCiAgICB9LAogICAgZ2V0U3RvcmVPcGVyYXRlVHlwZXMoKSB7CiAgICAgIHN0b3JlT3BlcmF0ZVR5cGUuZ2V0bGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuc3RvcmVPcGVyYXRlVHlwZXMgPSByZXNwb25zZS5kYXRhCiAgICAgIH0pLmNhdGNoKHJlamVjdCA9PiB7CiAgICAgIH0pCiAgICB9LAogICAgZ2V0R29vZHNDYXRlZ29yaWVzKCkgewogICAgICBnb29kc0NhdGVnb3J5LmdldGxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmdvb2RzQ2F0ZWdvcmllcyA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkuY2F0Y2gocmVqZWN0ID0+IHsKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5wYWdlLmN1cnJlbnQgPSAxCiAgICAgIHRoaXMuZ2V0RGF0YXMoKQogICAgfSwKICAgIGhhbmRsZVNvcnQoZGF0YSkgewogICAgICB0aGlzLnNvcnQucHJvcCA9IGRhdGEucHJvcAogICAgICB0aGlzLnNvcnQub3JkZXIgPSBkYXRhLm9yZGVyCiAgICAgIHRoaXMuZ2V0RGF0YXMoKQogICAgfSwKICAgIGhhbmRsZURldGFpbChyb3cpIHsKICAgICAgLy8g6Iul5YiX6KGo5pWw5o2u5bGV56S65LqG5YWo6YOo5bGe5oCn77yM5YiZ5Y+v55u05o6l5ou36LSd5YiX6KGo5pWw5o2uCiAgICAgIC8vIHRoaXMuZGV0YWlsLm1vZGVscyA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykKICAgICAgdGhpcy5kZXRhaWwuZGlhbG9nLnZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMubG9hZGluZy5kZXRhaWwgPSB0cnVlCiAgICAgIHN0b3JlUmVjb3JkLmdldChyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuZGV0YWlsLm1vZGVscyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB0aGlzLmxvYWRpbmcuZGV0YWlsID0gZmFsc2UKICAgICAgfSkuY2F0Y2gocmVqZWN0ID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcuZGV0YWlsID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVFeHBvcnQoKSB7CiAgICAgIHRoaXMubG9hZGluZy5leHBvcnQgPSB0cnVlCiAgICAgIHN0b3JlUmVjb3JkLmV4cG9ydEV4Y2VsKHRoaXMucXVlcnksIHRoaXMucGFnZSwgdGhpcy5zb3J0KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3Jlc3BvbnNlXSkKICAgICAgICBjb25zdCBmaWxlTmFtZSA9ICfku5PlgqjorrDlvZUueGxzJwogICAgICAgIGNvbnN0IGVsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpCiAgICAgICAgZWxpbmsub25sb2FkID0gKCkgPT4geyBVUkwucmV2b2tlT2JqZWN0VVJMKGVsaW5rLmhyZWYpIH0KICAgICAgICBlbGluay5kb3dubG9hZCA9IGZpbGVOYW1lCiAgICAgICAgZWxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgIGVsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGluaykKICAgICAgICBlbGluay5jbGljaygpCiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGluaykKICAgICAgICB0aGlzLmxvYWRpbmcuZXhwb3J0ID0gZmFsc2UKICAgICAgfSkuY2F0Y2gocmVqZWN0ID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcuZXhwb3J0ID0gZmFsc2UKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["store-record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6JA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"store-record.vue","sourceRoot":"src/views/log-manage","sourcesContent":["<template>\n  <div class=\"app-container list\">\n    <div class=\"toolbar\">\n      <el-select v-model=\"query.operateTypeId\" class=\"query-item\" style=\"width: 150px\" placeholder=\"操作意图\" clearable @clear=\"handleQuery\">\n        <el-option v-for=\"item in storeOperateTypes\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\n      </el-select>\n      <el-select v-model=\"query.ioType\" class=\"query-item\" style=\"width: 120px\" placeholder=\"是否启用\" clearable @clear=\"handleQuery\">\n        <el-option label=\"出\" value=\"0\" />\n        <el-option label=\"入\" value=\"1\" />\n      </el-select>\n      <el-select v-model=\"query.goodsCategoryId\" class=\"query-item\" style=\"width: 150px\" placeholder=\"货物种类\" clearable @clear=\"handleQuery\">\n        <el-option v-for=\"item in goodsCategories\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\n      </el-select>\n      <el-select v-model=\"query.operatorId\" class=\"query-item\" style=\"width: 150px\" placeholder=\"操作人员\" clearable @clear=\"handleQuery\">\n        <el-option v-for=\"item in operators\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\n      </el-select>\n      <el-select v-model=\"query.locationType\" class=\"query-item\" style=\"width: 150px\" placeholder=\"存储位置类型\" clearable @clear=\"handleQuery\">\n        <el-option label=\"运输设备\" value=\"2\" />\n        <el-option label=\"单元格\" value=\"3\" />\n        <el-option label=\"容器\" value=\"4\" />\n      </el-select>\n      <el-button class=\"tool tool-query\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">查询</el-button>\n      <el-button v-if=\"access.export.allow\" class=\"tool tool-export\" :loading=\"loading.export\" type=\"primary\" icon=\"vue-icon-excel\" @click=\"handleExport\">导出</el-button>\n    </div>\n\n    <audio id=\"audio\" src=\"/static/audio/130808.wav\" />\n\n    <el-table ref=\"listTable\" v-loading=\"loading.list\" v-adaptive=\"{ bottomOffset: 55 }\" height=\"200px\" :data=\"datas\" :default-sort=\"sort\" border fit highlight-current-row @sort-change=\"handleSort\">\n      <el-table-column label=\"序号\" type=\"index\" align=\"center\" width=\"65\" fixed>\n        <template slot-scope=\"scope\">\n          <span>{{ (page.current - 1) * page.size + scope.$index + 1 }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作时间\" prop=\"operateTime\" sortable=\"custom\" :sort-orders=\"sortOrders\" align=\"center\" width=\"100\" show-overflow-tooltip />\n      <el-table-column label=\"操作意图\" prop=\"storeOperateType.name\" :sort-orders=\"sortOrders\" align=\"center\" width=\"100\" show-overflow-tooltip />\n      <el-table-column label=\"操作单编号\" prop=\"documentCode\" sortable=\"custom\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip />\n      <el-table-column label=\"货物种类\" prop=\"goodsCategory.name\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip />\n      <el-table-column label=\"货物条形码\" prop=\"goodsBarCode\" sortable=\"custom\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip />\n      <el-table-column label=\"货物RFID码\" prop=\"goodsRfidCode\" sortable=\"custom\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip />\n      <el-table-column label=\"存储位置\" prop=\"locationType\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <span>{{ row.locationType===3 ? '单元格' :row.locationType===4 ? '容器':'运输设备' }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"存储位置条形码\" prop=\"locationBarCode\" sortable=\"custom\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip />\n      <el-table-column label=\"存储位置RFID码\" prop=\"locationRfidCode\" sortable=\"custom\" :sort-orders=\"sortOrders\" align=\"center\" width=\"150\" show-overflow-tooltip />\n      <el-table-column label=\"数量\" prop=\"quality\" :sort-orders=\"sortOrders\" align=\"center\" show-overflow-tooltip />\n      <el-table-column fixed=\"right\" label=\"操作\" align=\"center\" width=\"60\">\n        <template slot-scope=\"{row}\">\n          <el-tooltip v-if=\"access.detail.allow\" class=\"item\" effect=\"dark\" content=\"详情\" placement=\"top-end\">\n            <el-button type=\"primary\" plain class=\"button-operate button-detail\" size=\"mini\" @click=\"handleDetail(row)\"><i class=\"vue-icon-detail\" /></el-button>\n          </el-tooltip>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination :hidden=\"page.total==0\" :total=\"page.total\" :page.sync=\"page.current\" :limit.sync=\"page.size\" @pagination=\"getDatas\" />\n\n    <el-dialog v-loading=\"loading.detail\" custom-class=\"dialog-fullscreen dialog-detail\" :title=\"detail.dialog.title\" :visible.sync=\"detail.dialog.visible\" :modal=\"false\" :modal-append-to-body=\"false\">\n      <el-form ref=\"formDetail\" label-position=\"right\" :label-width=\"detail.dialog.labelWidth\">\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"操作意图\">\n              {{ detail.models.storeOperateType.name }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"操作单编号\">\n              {{ detail.models.documentCode }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"货物种类\">\n              {{ detail.models.goodsCategory.name }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"货物条形码\">\n              {{ detail.models.goodsBarCode }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"货物RFID码\">\n              {{ detail.models.goodsRfidCode }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"存储位置类型\">\n              {{ detail.models.locationType===0 ? '单元格' :(detail.models.locationType===1 ? '容器':'设备') }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"存储位置RFID码\">\n              {{ detail.models.locationRfidCode }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"存储位置条形码\">\n              {{ detail.models.locationBarCode }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"数量\">\n              {{ detail.models.quality }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"操作时间\">\n              {{ detail.models.operateTime }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"操作人员\">\n              {{ detail.models.operator.userName }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"送货人信息\">\n              {{ detail.models.deliveryman }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :xl=\"6\" :md=\"12\" :sm=\"24\">\n            <el-form-item label=\"描述\">\n              {{ detail.models.description }}\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport adaptive from '@/directive/el-table'\nimport Pagination from '@/components/Pagination'\nimport * as User from '@/api/system-manage/user'\nimport * as goodsCategory from '@/api/goods-manage/goods-category'\nimport * as storeRecord from '@/api/log-manage/store-record'\nimport * as storeOperateType from '@/api/log-manage/store-operate-type'\n\nexport default {\n  name: 'StoreRecord',\n  components: { Pagination },\n  directives: { adaptive },\n  data() {\n    return {\n      access: this.$store.getters.access['SystemLog']['StoreRecord'],\n      datas: null,\n      operators: null,\n      goodsCategories: null,\n      storeOperateTypes: null,\n      query: { operateTypeId: null, ioType: null, goodsCategoryId: null, locationType: null, operatorId: null },\n      page: { total: 0, current: 1, size: 20 },\n      sort: { prop: 'sort', order: 'ascending' },\n      detail: {\n        dialog: { title: '仓储记录信息', visible: false, labelWidth: '120px' },\n        models: { documentCode: null, storeOperateType: { name: null }, ioType: null, goodsCategory: { name: null }, goodsBarCode: null, goodsRfidCode: null, locationType: null, locationBarCode: null, locationRfidCode: null, quality: null, operator: { userName: null }, operateTime: null, deliveryman: null, description: null }\n      },\n      loading: { list: true, export: false, detail: false, update: false },\n      sortOrders: ['ascending', 'descending']\n    }\n  },\n  created() {\n    this.getDatas()\n    this.getOperators()\n    this.getGoodsCategories()\n    this.getStoreOperateTypes()\n  },\n  methods: {\n    getDatas() {\n      this.loading.list = true\n      storeRecord.getList(this.query, this.page, this.sort).then(response => {\n        this.datas = response.data.items\n        this.page.total = response.data.total\n        this.loading.list = false\n      }).catch(reject => {\n        this.loading.list = false\n      })\n    },\n    getOperators() {\n      User.getlist().then(response => {\n        this.operators = response.data\n      }).catch(reject => {\n      })\n    },\n    getStoreOperateTypes() {\n      storeOperateType.getlist().then(response => {\n        this.storeOperateTypes = response.data\n      }).catch(reject => {\n      })\n    },\n    getGoodsCategories() {\n      goodsCategory.getlist().then(response => {\n        this.goodsCategories = response.data\n      }).catch(reject => {\n      })\n    },\n    handleQuery() {\n      this.page.current = 1\n      this.getDatas()\n    },\n    handleSort(data) {\n      this.sort.prop = data.prop\n      this.sort.order = data.order\n      this.getDatas()\n    },\n    handleDetail(row) {\n      // 若列表数据展示了全部属性，则可直接拷贝列表数据\n      // this.detail.models = Object.assign({}, row)\n      this.detail.dialog.visible = true\n      this.loading.detail = true\n      storeRecord.get(row.id).then(response => {\n        this.detail.models = response.data\n        this.loading.detail = false\n      }).catch(reject => {\n        this.loading.detail = false\n      })\n    },\n    handleExport() {\n      this.loading.export = true\n      storeRecord.exportExcel(this.query, this.page, this.sort).then(response => {\n        const blob = new Blob([response])\n        const fileName = '仓储记录.xls'\n        const elink = document.createElement('a')\n        elink.onload = () => { URL.revokeObjectURL(elink.href) }\n        elink.download = fileName\n        elink.style.display = 'none'\n        elink.href = URL.createObjectURL(blob)\n        document.body.appendChild(elink)\n        elink.click()\n        document.body.removeChild(elink)\n        this.loading.export = false\n      }).catch(reject => {\n        this.loading.export = false\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"]}]}